// ==UserScript==
// @name BGA OPEN LEFT TILES INNS
// @description  BGA Carcassone Counter of Tiles
// @author       Noelia Walter
// @version      1.0.5
// @match https://boardgamearena.com/*
// @updateURL    https://raw.githubusercontent.com/noeliawalterpro/BGAcarcassoneCounter/main/UserscriptBGACarcassoneCounter
// @downloadURL  https://raw.githubusercontent.com/noeliawalterpro/BGAcarcassoneCounter/main/UserscriptBGACarcassoneCounter
// @grant    none
// @run-at       document-end
// @noframes
// ==/UserScript==


console.log("START USER SCRIPT");var remaningTiles,selectedTiles,qtyTiles,Bga_TileArt,state2,highLight,useTiles,leftTiles,Tiles,edgeSearch,edges,possibleRotations,totalMatched,formatted,allTiles=[{set:"BASE",id:0,qty:1,tags:["road","road end","city"],edges:["C","C","R","C"]},{set:"BASE",id:1,qty:2,tags:["road","road end","city","shield"],edges:["C","C","R","C"]},{set:"BASE",id:2,qty:3,tags:["city","doritos"],edges:["C","F","F","C"]},{set:"BASE",id:3,qty:2,tags:["city","doritos","shield"],edges:["C","F","F","C"]},{set:"BASE",id:4,qty:3,tags:["city","doritos","road","curve"],edges:["C","R","R","C"]},{set:"BASE",id:5,qty:2,tags:["city","doritos","road","curve","shield"],edges:["C","R","R","C"]},{set:"BASE",id:6,qty:1,tags:["city","join"],edges:["F","C","F","C"]},{set:"BASE",id:7,qty:2,tags:["city","join","shield"],edges:["F","C","F","C"]},{set:"BASE",id:8,qty:2,tags:["city","top"],edges:["C","F","F","C"]},{set:"BASE",id:9,qty:3,tags:["city","top"],edges:["C","F","C","F"]},{set:"BASE",id:10,qty:5,tags:["city","top"],edges:["C","F","F","F"]},{set:"BASE",id:11,qty:3,tags:["city","top","road","curve","left"],edges:["C","F","R","R"]},{set:"BASE",id:12,qty:3,tags:["city","top","road","curve","right"],edges:["C","R","R","F"]},{set:"BASE",id:13,qty:3,tags:["city","top","road","road end"],edges:["C","R","R","R"]},{set:"BASE",id:14,qty:4,tags:["city","top","road","straight"],edges:["C","R","F","R"]},{set:"BASE",id:15,qty:8,tags:["road","straight"],edges:["R","F","R","F"]},{set:"BASE",id:16,qty:9,tags:["road","curve"],edges:["F","F","R","R"]},{set:"BASE",id:17,qty:4,tags:["road","road end"],edges:["F","R","R","R"]},{set:"BASE",id:18,qty:1,tags:["road","road end"],edges:["R","R","R","R"]},{set:"BASE",id:19,qty:4,tags:["monastery"],edges:["F","F","F","F"]},{set:"BASE",id:20,qty:2,tags:["monastery","road","road end"],edges:["F","F","R","F"]},{set:"BASE",id:21,qty:1,tags:["city","shield"],edges:["C","C","C","C"]},{set:"BASE",id:22,qty:3,tags:["city"],edges:["C","C","F","C"]},{set:"BASE",id:23,qty:1,tags:["city","shield"],edges:["C","C","F","C"]},{set:"RIVER",id:65,qty:1,tags:["river"],edges:["F","F","W","F"]},{set:"RIVER",id:66,qty:2,tags:["river"],edges:["F","W","W","F"]},{set:"RIVER",id:67,qty:1,tags:["river","road","monastery"],edges:["F","W","R","W"]},{set:"RIVER",id:68,qty:1,tags:["river","road"],edges:["R","R","W","W"]},{set:"RIVER",id:69,qty:2,tags:["river"],edges:["W","F","W","F"]},{set:"RIVER",id:70,qty:1,tags:["river"],edges:["W","F","F","F"]},{set:"RIVER",id:71,qty:1,tags:["river","road","city"],edges:["W","C","W","R"]},{set:"RIVER",id:72,qty:1,tags:["river","city"],edges:["C","W","C","W"]},{set:"RIVER",id:73,qty:1,tags:["river","road"],edges:["R","W","W","R"]},{set:"RIVER",id:74,qty:1,tags:["river","city"],edges:["W","C","C","W"]},{set:"INNS",id:24,qty:1,tags:["road","curve","inn"],edges:["F","F","R","R"]},{set:"INNS",id:25,qty:1,tags:["city","road"],edges:["C","F","R","F"]},{set:"INNS",id:26,qty:1,tags:["road","city","road end","shield"],edges:["F","F","R","R"]},{set:"INNS",id:27,qty:1,tags:["road","monastery"],edges:["F","R","F","R"]},{set:"INNS",id:28,qty:1,tags:["road","curve"],edges:["R","R","R","R"]},{set:"INNS",id:29,qty:1,tags:["city","road","road end"],edges:["C","R","F","C"]},{set:"INNS",id:30,qty:1,tags:["city"],edges:["F","C","F","F"]},{set:"INNS",id:31,qty:1,tags:["city"],edges:["C","C","C","C"]},{set:"INNS",id:32,qty:2,tags:["city","cathedral"],edges:["C","C","C","C"]},{set:"INNS",id:33,qty:1,tags:["road","straight","inn"],edges:["F","R","F","R"]},{set:"INNS",id:34,qty:1,tags:["road","road end","inn"],edges:["F","R","R","R"]},{set:"INNS",id:35,qty:1,tags:["city","road","shield","inn"],edges:["C","R","R","C"]},{set:"INNS",id:36,qty:1,tags:["city","road","inn"],edges:["C","F","R","R"]},{set:"INNS",id:37,qty:1,tags:["city","road","road end","inn"],edges:["C","F","R","C"]},{set:"INNS",id:38,qty:1,tags:["city","shield"],edges:["C","F","C","C"]},{set:"INNS",id:39,qty:1,tags:["city"],edges:["C","F","C","C"]},{set:"INNS",id:40,qty:1,tags:["city","road","straight"],edges:["R","C","R","C"]}],idTile="upperrightmenu",squaresize="89px",river=document.getElementById("menu_option_value_106").innerHTML,princessDragons=document.getElementById("menu_option_value_107").innerHTML,innsAndCathedrals=document.getElementById("menu_option_value_103").innerHTML,builders=document.getElementById("menu_option_value_104").innerHTML,htmlUsedTiles="",baseSet=!0,innsSet="S\xed"==innsAndCathedrals||"Yes"==innsAndCathedrals,riverSet="S\xed"==river||"Yes"==river,matches=[];const wildcard="?",newElement=document.createElement("div");function isItemInArray(b,d){for(var a=0;a<b.length;a++)for(var c=0;c<b[a].length;c++)if(b[a][c]==d)return a;return!1}function useTilef(b){var a,c=[];for(a=0;a<b.length;a++)c.push(isItemInArray(Bga_TileArt,b[a]));return c}function counterTile(){a=0;for(var a,b="";document.getElementsByClassName("tile_art")[a].id;)b+=" , "+document.getElementsByClassName("tile_art")[a].id,a++;var c=[b][0].replace(/\D+/g," ").trim().split(" ").map(a=>parseInt(a));console.log(c),console.log("expansions");var d=[1,2,3,2,3,2,1,2,2,3,5,3,3,3,4,8,9,4,1,4,2,1,3,1],e=[1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1],f=[1,2,1,1,2,1,1,1,1,1];for(qtyTiles=[],state2=[],Bga_TileArt=(Bga_TileArt=[]).concat([[1],[3,2],[6,5,4],[8,7],[11,10,9],[13,12],[14],[16,15],[18,17],[21,20,19],[26,25,24,23,22],[29,28,27],[32,31,30],[35,34,33],[39,38,37,36],[47,46,45,44,43,42,41,40],[56,55,54,53,52,51,50,49,48],[60,59,58,57],[61],[65,64,63,62],[67,66],[68],[71,70,69],[72]]),qtyTiles=qtyTiles.concat(d),state2=state2.concat(d),!0==innsSet&&(Bga_TileArt=Bga_TileArt.concat([[73],[74],[75],[76],[77],[78],[79],[80],[81,82],[83],[84],[85],[89],[90]]),qtyTiles=qtyTiles.concat(e),state2=state2.concat(e)),!0==riverSet&&(Bga_TileArt=Bga_TileArt.concat([[115],[116,117],[118],[119],[120,121],[122],[123],[124],[125],[126]]),qtyTiles=qtyTiles.concat(f),state2=state2.concat(f)),selectedTiles=allTiles.filter(a=>!0===baseSet&&"BASE"===a.set|| !0===riverSet&&"RIVER"===a.set|| !0===innsSet&&"INNS"===a.set),console.log(selectedTiles),useTiles=useTilef(c),leftTiles=state2,a=0;a<useTiles.length;a++){var g=useTiles[a],h=leftTiles[g]-1;leftTiles[g]=h}}function printTiles(){remaningTiles=leftTiles.reduce((a,b)=>b+a,0);var a,d,c,e,l,f="",g="",h="",b="none",i="",j="",k="";if(console.log("matches"),console.log(matches),0==matches.length){for(console.log("length 0 "),a=0;a<selectedTiles.length;a++)e=0===leftTiles[a]?"0.4":"1",d=leftTiles[a]>0?"#d9cccc":"transparent",b=leftTiles[a]<qtyTiles[a]?"red":"white","BASE"==String(selectedTiles[a].set)&&(f+='<div style="opacity:'+String(e)+"; border-bottom:4px solid "+String(b)+"; border-top:4px solid "+String(c)+";  border-radius: 5px;background:url(//mecadesign3d.com/wp-content/uploads/2022/07/test-1.jpg); width:"+String(squaresize)+"; height:"+String(squaresize)+"; background-position: 0% -"+String(100*selectedTiles[a].id)+"%; background-size:267px 7298px; display: inline-flex; margin: 10px; align-items:flex-end; box-shadow: 4px 4px"+String(d)+';">',f+='<div style="font-weigth:bold; font-size:16px; font-color:black; background-color:rgba(255,255,255,0.8); width:20px; height: 20px;padding: 5px; text-align: center; border: 1px solid #333">'+String(leftTiles[a]+"/"+qtyTiles[a])+"</div>",f+="</div>"),"INNS"==String(selectedTiles[a].set)&&(h+='<div style="opacity:'+String(e)+";border-bottom:4px solid "+String(b)+"; border-top:4px solid "+String(c)+";  border-radius: 5px;background:url(//mecadesign3d.com/wp-content/uploads/2022/07/test-1.jpg); width:"+String(squaresize)+"; height:"+String(squaresize)+"; background-position: 0% -"+String(100*selectedTiles[a].id)+"%; background-size:267px 7298px; display: inline-flex; margin: 10px; align-items:flex-end; box-shadow: 4px 4px"+String(d)+';">',h+='<div style="font-weigth:bold; font-size:16px; font-color:black; background-color:rgba(255,255,255,0.8); width:20px; height: 20px;padding: 5px; text-align: center; border: 1px solid #333">'+String(leftTiles[a]+"/"+qtyTiles[a])+"</div>",h+="</div>"),"RIVER"==String(selectedTiles[a].set)&&(g+='<div style="opacity:'+String(e)+";border-bottom:4px solid "+String(b)+"; border-top:4px solid "+String(c)+";   border-radius: 5px;background:url(//mecadesign3d.com/wp-content/uploads/2022/07/test-1.jpg); width:"+String(squaresize)+"; height:"+String(squaresize)+"; background-position: 0% -"+String(100*selectedTiles[a].id)+"%; background-size:267px 7298px; display: inline-flex; margin: 10px; align-items:flex-end; box-shadow: 4px 4px"+String(d)+';">',g+='<div style="font-weigth:bold; font-size:16px; font-color:black; background-color:rgba(255,255,255,0.8); width:20px; height: 20px;padding: 5px; text-align: center; border: 1px solid #333">'+String(leftTiles[a]+"/"+qtyTiles[a])+"</div>",g+="</div>");for(a=0;a<leftTiles.length;a++)e=0===leftTiles[a]?"0.4":"1",d=leftTiles[a]>0?"#d9cccc":"transparent",b=leftTiles[a]<qtyTiles[a]?"red":"white",leftTiles[a]>0&&("BASE"==String(selectedTiles[a].set)&&(i+='<div style="opacity:'+String(e)+";  border-bottom:4px solid "+String(b)+"; border-top:4px solid "+String(c)+";  border-top:4px solid "+String(c)+";  border-radius: 5px;background:url(//mecadesign3d.com/wp-content/uploads/2022/07/test-1.jpg); width:"+String(squaresize)+"; height:"+String(squaresize)+"; background-position: 0% -"+String(100*selectedTiles[a].id)+"%; background-size:267px 7298px; display: inline-flex; margin: 10px; align-items:flex-end; box-shadow: 4px 4px "+String(d)+';">',i+='<div style="font-weigth:bold; font-size:16px; font-color:black; background-color:rgba(255,255,255,0.8); width:20px; height: 20px;padding: 5px; text-align: center; border: 1px solid #333">'+String(leftTiles[a]+"/"+qtyTiles[a])+"</div>",i+="</div>"),"INNS"==String(selectedTiles[a].set)&&(j+='<div style="opacity:'+String(e)+";  border-bottom:4px solid "+String(b)+"; border-top:4px solid "+String(c)+";  border-top:4px solid "+String(c)+";   border-radius: 5px;background:url(//mecadesign3d.com/wp-content/uploads/2022/07/test-1.jpg); width:"+String(squaresize)+"; height:"+String(squaresize)+"; background-position: 0% -"+String(100*selectedTiles[a].id)+"%; background-size:267px 7298px; display: inline-flex; margin: 10px; align-items:flex-end; box-shadow: 4px 4px "+String(d)+';">',j+='<div style="font-weigth:bold; font-size:16px; font-color:black; background-color:rgba(255,255,255,0.8); width:20px; height: 20px;padding: 5px; text-align: center; border: 1px solid #333">'+String(leftTiles[a]+"/"+qtyTiles[a])+"</div>",j+="</div>"),"RIVER"==String(selectedTiles[a].set)&&(k+='<div style="opacity:'+String(e)+"; border-bottom:4px solid "+String(b)+"; border-top:4px solid "+String(c)+";  border-top:4px solid "+String(c)+";    border-radius: 5px;background:url(//mecadesign3d.com/wp-content/uploads/2022/07/test-1.jpg); width:"+String(squaresize)+"; height:"+String(squaresize)+"; background-position: 0% -"+String(100*selectedTiles[a].id)+"%; background-size:267px 7298px; display: inline-flex; margin: 10px; align-items:flex-end; box-shadow: 4px 4px "+String(d)+';">',k+='<div style="font-weigth:bold; font-size:16px; font-color:black; background-color:rgba(255,255,255,0.8); width:20px; height: 20px;padding: 5px; text-align: center; border: 1px solid #333">'+String(leftTiles[a]+"/"+qtyTiles[a])+"</div>",k+="</div>"))}else{for(console.log("matches"),a=0;a<leftTiles.length;a++)e=0===leftTiles[a]?"0.4":"1",d=leftTiles[a]>0?"#d9cccc":"transparent",console.log(String(isItemInArray(matches,leftTiles[a]))),!0==matches.includes(selectedTiles[a].id)?c="blue":(b="none",b=leftTiles[a]<qtyTiles[a]?"red":"white"),"BASE"==String(selectedTiles[a].set)&&(f+='<div style="opacity:'+String(e)+"; border-bottom:4px solid "+String(b)+"; border-top:4px solid "+String(c)+";  border-radius: 5px;background:url(//mecadesign3d.com/wp-content/uploads/2022/07/test-1.jpg); width:"+String(squaresize)+"; height:"+String(squaresize)+"; background-position: 0% -"+String(100*selectedTiles[a].id)+"%; background-size:267px 7298px; display: inline-flex; margin: 10px; align-items:flex-end; box-shadow: 4px 4px "+String(d)+';">',f+='<div style="font-weigth:bold; font-size:16px; font-color:black; background-color:rgba(255,255,255,0.8); width:20px; height: 20px;padding: 5px; text-align: center; border: 1px solid #333">'+String(leftTiles[a]+"/"+qtyTiles[a])+"</div>",f+="</div>"),"INNS"==String(selectedTiles[a].set)&&(h+='<div style="opacity:'+String(e)+"; border-bottom:4px solid "+String(b)+"; border-top:4px solid "+String(c)+";  border-radius: 5px;background:url(//mecadesign3d.com/wp-content/uploads/2022/07/test-1.jpg); width:"+String(squaresize)+"; height:"+String(squaresize)+"; background-position: 0% -"+String(100*selectedTiles[a].id)+"%; background-size:267px 7298px; display: inline-flex; margin: 10px; align-items:flex-end; box-shadow: 4px 4px "+String(d)+';">',h+='<div style="font-weigth:bold; font-size:16px; font-color:black; background-color:rgba(255,255,255,0.8); width:20px; height: 20px;padding: 5px; text-align: center; border: 1px solid #333">'+String(leftTiles[a]+"/"+qtyTiles[a])+"</div>",h+="</div>"),"RIVER"==String(selectedTiles[a].set)&&(g+='<div style="opacity:'+String(e)+"; border-bottom:4px solid "+String(b)+"; border-top:4px solid "+String(c)+"; border-radius: 5px;background:url(//mecadesign3d.com/wp-content/uploads/2022/07/test-1.jpg); width:"+String(squaresize)+"; height:"+String(squaresize)+"; background-position: 0% -"+String(100*selectedTiles[a].id)+"%; background-size:267px 7298px; display: inline-flex; margin: 10px; align-items:flex-end; box-shadow: 4px 4px "+String(d)+';">',g+='<div style="font-weigth:bold; font-size:16px; font-color:black; background-color:rgba(255,255,255,0.8); width:20px; height: 20px;padding: 5px; text-align: center; border: 1px solid #333">'+String(leftTiles[a]+"/"+qtyTiles[a])+"</div>",g+="</div>");for(l=0;l<matches.length;l++)e=0===leftTiles[a=matches[l]]?"0.4":"1",d=leftTiles[a]>0?"#d9cccc":"transparent",!0==matches.includes(selectedTiles[a].id)?c="blue":(b="none",b=leftTiles[a]<qtyTiles[a]?"red":"white"),leftTiles[a]>0&&("BASE"==String(selectedTiles[a].set)&&(i+='<div style="opacity:'+String(e)+"; border-bottom:4px solid "+String(b)+"; border-top:4px solid "+String(c)+";  border-radius: 5px;background:url(//mecadesign3d.com/wp-content/uploads/2022/07/test-1.jpg); width:"+String(squaresize)+"; height:"+String(squaresize)+"; background-position: 0% -"+String(100*selectedTiles[a].id)+"%; background-size:267px 7298px; display: inline-flex; margin: 10px; align-items:flex-end; box-shadow: 4px 4px "+String(d)+';">',i+='<div style="font-weigth:bold; font-size:16px; font-color:black; background-color:rgba(255,255,255,0.8); width:20px; height: 20px;padding: 5px; text-align: center; border: 1px solid #333">'+String(leftTiles[a]+"/"+qtyTiles[a])+"</div>",i+="</div>"),"INNS"==String(selectedTiles[a].set)&&(j+='<div style="opacity:'+String(e)+"; border-bottom:4px solid "+String(b)+"; border-top:4px solid "+String(c)+";  border-radius: 5px;background:url(//mecadesign3d.com/wp-content/uploads/2022/07/test-1.jpg); width:"+String(squaresize)+"; height:"+String(squaresize)+"; background-position: 0% -"+String(100*selectedTiles[a].id)+"%; background-size:267px 7298px; display: inline-flex; margin: 10px; align-items:flex-end; box-shadow: 4px 4px "+String(d)+';">',j+='<div style="font-weigth:bold; font-size:16px; font-color:black; background-color:rgba(255,255,255,0.8); width:20px; height: 20px;padding: 5px; text-align: center; border: 1px solid #333">'+String(leftTiles[a]+"/"+qtyTiles[a])+"</div>",j+="</div>"),"RIVER"==String(selectedTiles[a].set)&&(k+='<div style="opacity:'+String(e)+";  border-bottom:4px solid "+String(b)+"; border-top:4px solid "+String(c)+";  border-radius: 5px;background:url(//mecadesign3d.com/wp-content/uploads/2022/07/test-1.jpg); width:"+String(squaresize)+"; height:"+String(squaresize)+"; background-position: 0% -"+String(100*selectedTiles[a].id)+"%; background-size:267px 7298px; display: inline-flex; margin: 10px; align-items:flex-end; box-shadow: 4px 4px "+String(d)+';">',k+='<div style="font-weigth:bold; font-size:16px; font-color:black; background-color:rgba(255,255,255,0.8); width:20px; height: 20px;padding: 5px; text-align: center; border: 1px solid #333">'+String(leftTiles[a]+"/"+qtyTiles[a])+"</div>",k+="</div>"))}document.getElementById("tiles-remain").innerHTML="<div><h3>RemaingTiles "+String(remaningTiles)+" </h3></div>",document.getElementById("base-tab").innerHTML='<h3>Base</h3><div style="display: grid; background: #f8f8f8;grid-template-columns: 1fr 1fr 1fr;">'+f+"</div>",document.getElementById("base-left").innerHTML='<h3>Base</h3><div style="display: grid; background: #f8f8f8;grid-template-columns: 1fr 1fr 1fr ;">'+i+"</div>",!0==innsSet&&(document.getElementById("inns-tab").innerHTML='<h3>Inns</h3><div style="display: grid; background: #f8f8f8;grid-template-columns: 1fr 1fr 1fr ;">'+h+"</div>",document.getElementById("inns-left").innerHTML='<h3>Inns</h3><div style="display: grid; background: #f8f8f8;grid-template-columns: 1fr 1fr 1fr ;">'+j+"</div>"),!0==riverSet&&(document.getElementById("river-tab").innerHTML='<h3>River</h3><div style="display: grid; background: #f8f8f8;grid-template-columns: 1fr 1fr 1fr ;">'+g+"</div>",document.getElementById("river-left").innerHTML='<h3>River</h3><div style="display: grid; background: #f8f8f8;grid-template-columns: 1fr 1fr 1fr ;">'+k+"</div>")}document.body.appendChild(newElement),newElement.innerHTML='<div id="modal-tile-box" style="background: #f8f8f8;box-shadow: 3px 3px 3px dimgray;position: fixed;bottom: 0px;left:0;padding: 10px;font-size:14px; width: 200px;z-index: 999;"></div>',document.getElementById("modal-tile-box").innerHTML+=`<style>
body {font-family: Arial, Helvetica, sans-serif;}
/* The Modal (background) */#inputSearch{text-transform: uppercase;}.modal{display: none; /* Hidden by default */position: fixed; /* Stay in place */z-index: 1; /* Sit on top */padding-top: 100px; /* Location of the box */left: 0;top: 0;width: 100%; /* Full width */height: 100%; /* Full height */overflow: auto; /* Enable scroll if needed */background-color: #f8f8f8; /* Fallback color */background-color:rgba(181, 255, 200, 0.1);}div#leftTile{display: none;height: 60vh;}/* Modal Content */.modal-content{background-color: #f8f8f8;margin: auto;padding: 20px;border: 1px solid #888; width: 380px;max-height:80vh;overflow-y: auto;position:absolute;left:0px;}/* The Close Button */.close{color: #aaaaaa;float: right;font-size: 28px;font-weight: bold;}#arrowdown,#arrowtop{display: block;position: absolute;background-image: url('../../../img/common/arrows.png');width: 32px;height: 32px;}#arrowtop{top: 0px;left: 50%;background-position: 0px 32px; background-position-x: 0px; background-position-y: 32px;}#arrowdown{bottom: 0px;left: 50%;background-position: 32px 32px;}.close:hover,.close:focus{color: #000;text-decoration: none;cursor: pointer;}</style></head><body><h2>Tiles Counter</h2><h3>Tile Search</h3><ul> <li> C for City</li><li> R for Road</li><li> F for Field</li><li> W for Water (river expansion)</li><li> ? for any feature</li></ul><p>For example, searching for "FFWF" will match the first tile displayed below.</p><p>Note that the sequence must be created by going around the tile in a clockwise direction.</p><input id="inputSearch" type=text maxlength=4 placeholder="Try typing CCRC"><hr><div id="searchResult">no results yet..</div></div><br><button id="myBtn" style=" border: 0;padding: 20px; padding-top: 20px; padding-right: 20px; padding-bottom: 20px; padding-left: 20px;width: 100%;background: #73C13C;font-size: 20px;box-shadow: 5px 5px green;">Count Tiles </button><div id="myModal" class="modal"><div class="modal-content" ><div style="display:block"><h2>Tiles Left Counter</h2><div><h3>Color Code</h3><b style="color:blue"> - Search Tiles</b><br><b style="color:red"> - At least one Tile Use</b> </div><span class="close">&times;</span><div id="myModalTiles" ><div id="tiles-remain"></div><br><button id="myBtn2" style=" border: 0;padding: 10px;width: 100%;grid-column:1/3;color:white;background: blue;font-size: 20px;box-shadow: 5px 5px green;">Show All Tiles <span id="arrowdown"> <span></button><button id="myBtn3" style=" border: 0;padding: 10px;width: 100%;grid-column:1/3;color:white;background: blue;font-size: 20px;box-shadow: 5px 5px green;">Show Only Left Tiles<span id="arrowtop"> </button><div id="leftTile"><h2> Only the Left Tiles</h2><div id="river-left" class="w3-container tab"></div><div id="base-left" class="w3-container tab" ></div><div id="inns-left" class="w3-container tab" ></div></div><div id="allTile"><h2> All Tiles</h2><div id="river-tab" class="w3-container tab"></div><div id="base-tab" class="w3-container tab" ></div><div id="inns-tab" class="w3-container tab" ></div></div></div></div></div>`;var modal=document.getElementById("myModal"),btn=document.getElementById("myBtn"),span=document.getElementsByClassName("close")[0];const box=document.getElementById("leftTile"),box2=document.getElementById("allTile");btn.onclick=function(){document.getElementById("fullscreen").click(),document.getElementById("zoomout").click(),document.getElementById("zoomout").click(),document.getElementById("zoomout").click(),modal.style.display="block",btn2.style.display="block",btn3.style.display="none",box.style.display="block",box2.style.display="none",counterTile(),printTiles()};const btn2=document.getElementById("myBtn2"),btn3=document.getElementById("myBtn3");btn3.addEventListener("click",()=>{btn2.style.display="block",btn3.style.display="none",box.style.display="block",box2.style.display="none"}),btn2.addEventListener("click",()=>{btn2.style.display="none",btn3.style.display="block",box.style.display="none",box2.style.display="block"}),span.onclick=function(){modal.style.display="none"},window.onclick=function(a){a.target==modal&&(modal.style.display="none")};var getTileIndexById=function(a){return selectedTiles.findIndex(b=>b.id===a)},setMatches=function(a){searchMatches.value=a};function searchMatches(a){return a.value=[],a}var edgeRotations=function([a="?",b="?",c="?",d="?"]){return[[a,b,c,d],[d,a,b,c],[c,d,a,b],[b,c,d,a]]};const input=document.getElementById("inputSearch");function statisticsTile(){counterTile(),0===(edges=(edgeSearch=document.getElementById("inputSearch").value).split("").map(a=>a.toUpperCase())).length&&(setMatches([]),document.getElementById("searchResult").innerHTML="No search results"),possibleRotations=edgeRotations(edges),setMatches(matches=selectedTiles.filter(a=>{let[b,c,d,e]=a.edges;return possibleRotations.filter(([a,f,g,h])=>(a===b||"?"===a)&&(f===c||"?"===f)&&(g===d||"?"===g)&&(h===e||"?"===h)).length>0}).map(a=>a.id)),0===(totalMatched=matches.reduce((a,b)=>state2[getTileIndexById(b)]+a,0))&&(setMatches([]),document.getElementById("searchResult").innerHTML="No search results"),formatted=(totalMatched/remaningTiles*100).toFixed(2),document.getElementById("searchResult").innerHTML="<b>"+String(totalMatched)+" matche(s).</b> You have a <b>"+String(formatted)+"% </b> chance of drawing a tile with edges <b> "+String(edges.reduce((a,b)=>`${a}, ${b}</b>`)),printTiles()}input.addEventListener("input",statisticsTile),modal.style.display="none",document.getElementById("fullscreen").click(),document.getElementById("zoomout").click(),document.getElementById("zoomout").click(),document.getElementById("zoomout").click(),console.log("END USER SCRIPT")

